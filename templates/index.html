<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μλ£ μ°¨νΈ μ‘μ„± λ„μ°λ―Έ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>π¥ μλ£ μ°¨νΈ μ‘μ„± λ„μ°λ―Έ</h1>
            <p>μμ„± μΈμ‹μ„ ν†µν• SOAP λ…ΈνΈ μλ™ μƒμ„±</p>
        </header>

        <main>
            <!-- Step 1: μ¤λ””μ¤ μ…λ ¥ -->
            <section class="card">
                <h2>π¤ Step 1: μ¤λ””μ¤ μ…λ ¥</h2>
                
                <!-- νƒ­ μ„ νƒ -->
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="record">μ‹¤μ‹κ°„ λ…Ήμ</button>
                    <button class="tab-btn" data-tab="upload">νμΌ μ—…λ΅λ“</button>
                </div>
                
                <!-- μ‹¤μ‹κ°„ λ…Ήμ νƒ­ -->
                <div id="recordTab" class="tab-content active">
                    <div class="record-controls">
                        <button id="startRecordBtn" class="btn btn-danger">
                            π”΄ λ…Ήμ μ‹μ‘
                        </button>
                        <button id="stopRecordBtn" class="btn btn-secondary" disabled>
                            βΉοΈ λ…Ήμ μΆ…λ£
                        </button>
                        <span id="recordingTime" class="recording-time">00:00</span>
                    </div>
                    <div class="audio-visualizer">
                        <canvas></canvas> id="visualizer" width="600" height="1000"></canvas>
                    </div>
                    <div id="recordedAudioContainer" style="display: none;">
                        <p>β… λ…Ήμ μ™„λ£!</p>
                        <audio id="recordedAudio" controls></audio>
                        <button id="processRecordedBtn" class="btn btn-primary">
                            μμ„± μΈμ‹ μ‹μ‘
                        </button>
                    </div>
                </div>
                
                <!-- νμΌ μ—…λ΅λ“ νƒ­ -->
                <div id="uploadTab" class="tab-content">
                    <div class="upload-area">
                        <input type="file" id="audioFile" accept="audio/*,.mp3,.wav,.m4a" />
                        <button id="uploadBtn" class="btn btn-primary">μ—…λ΅λ“ λ° μμ„± μΈμ‹</button>
                    </div>
                </div>
                
                <div id="uploadStatus" class="status"></div>
            </section>

            <!-- Step 2: μ „μ‚¬ κ²°κ³Ό -->
            <section class="card" id="transcriptSection" style="display: none;">
                <h2>π“„ Step 2: μμ„± μΈμ‹ κ²°κ³Ό</h2>
                <textarea id="transcript" rows="6" placeholder="μμ„± μΈμ‹ κ²°κ³Όκ°€ μ—¬κΈ° ν‘μ‹λ©λ‹λ‹¤..."></textarea>
                <div class="form-group">
                    <label for="department">μ§„λ£κ³Ό:</label>
                    <select id="department">
                        <option value="λ‚΄κ³Ό">λ‚΄κ³Ό</option>
                        <option value="μ •ν•μ™Έκ³Ό">μ •ν•μ™Έκ³Ό</option>
                        <option value="μ†μ•„κ³Ό">μ†μ•„κ³Ό</option>
                        <option value="μ΄λΉ„μΈν›„κ³Ό">μ΄λΉ„μΈν›„κ³Ό</option>
                        <option value="ν”Όλ¶€κ³Ό">ν”Όλ¶€κ³Ό</option>
                    </select>
                </div>
                <button id="generateSoapBtn" class="btn btn-success">SOAP λ…ΈνΈ μƒμ„±</button>
                <!-- β… μμ • 2: SOAP μƒμ„± μƒνƒ λ©”μ‹μ§€ μμ—­ μ¶”κ°€ -->
                <div id="soapStatus" class="status"></div>
            </section>


            <!-- Step 3: SOAP λ…ΈνΈ -->
            <section class="card" id="soapSection" style="display: none;">
                <h2>π“‹ Step 3: μƒμ„±λ SOAP λ…ΈνΈ</h2>
                <textarea id="soapNote" rows="15" placeholder="SOAP λ…ΈνΈκ°€ μ—¬κΈ° ν‘μ‹λ©λ‹λ‹¤..."></textarea>
                <div class="button-group">
                    <button id="copyBtn" class="btn btn-primary">π“‹ λ³µμ‚¬</button>
                    <button id="downloadBtn" class="btn btn-secondary">π’Ύ λ‹¤μ΄λ΅λ“</button>
                    <button id="searchMedBtn" class="btn btn-info">π’ μ•½λ¬Ό κ²€μƒ‰</button>
                </div>
            </section>

            <!-- μ•½λ¬Ό κ²€μƒ‰ λ¨λ‹¬ -->
            <div id="medModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>π’ μ•½λ¬Ό ν…ν”λ¦Ώ κ²€μƒ‰</h3>
                    <input type="text" id="medSearchInput" placeholder="κ²€μƒ‰μ–΄ μ…λ ¥ (μ: ν•΄μ—΄, νƒ€μ΄λ λ†€)" />
                    <button id="searchBtn" class="btn btn-primary">κ²€μƒ‰</button>
                    <div id="searchResults"></div>
                </div>
            </div>
        </main>

        <footer>
            <p>β οΈ μ΄ μ‹μ¤ν…μ€ μμ‚¬μ μ§„λ£ λ³΄μ΅° λ„κµ¬μ…λ‹λ‹¤. μµμΆ… μ§„λ‹¨κ³Ό μ²λ°©μ€ μμ‚¬κ°€ μ§μ ‘ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
